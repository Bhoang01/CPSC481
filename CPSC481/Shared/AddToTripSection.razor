@inject NavigationManager NavManager

<div class="flex flex-col w-1/4 gap-y-3">
	<p class="text-xl font-medium text-black">Current trip: Toronto 2022</p>
	<button class="p-3 rounded bg-cream2 hover:bg-cream3 transition-all text-center text-xl text-black"
		@onclick="favorite">Favorite</button>
	@if (step == 3)
	{
		<div class="w-full text-xl font-medium text-cream bg-green p-3 rounded text-center">Added to Trip!</div>
	}
	else
	{
		<button class=" p-3 rounded bg-blue hover:bg-blue2 transition-all text-center text-xl text-cream"
		@onclick="addToTrip">Add to
			Trip</button>
	}
	@if (step == 1)
	{
		<div class="flex flex-col gap-y-2 border-2 border-black rounded p-2 justify-center items-center">
			<div class="w-full text-center border-b-2 border-black">
				<p class="text-lg font-medium text-black">Existing Trips</p>
			</div>
			<div class="flex flex-col gap-y-1 justify-start items-start">
				<div class="p-2 bg-cream hover:bg-cream3 transition-all rounded" @onclick="() => setTrip(0)">
					<p class="text-md text-black cursor-pointer">Toronto 2022</p>
				</div>
				<div class="p-2 bg-cream hover:bg-cream3 transition-all rounded" @onclick="() => setTrip(1)">
					<p class="text-md text-black cursor-pointer">Miami 2019</p>
				</div>
				<div class="p-2 bg-cream hover:bg-cream3 transition-all rounded" @onclick="addTrip">
					<p class="text-md text-black cursor-pointer">ADD TRIP +</p>
				</div>
			</div>
		</div>
	}
	@if (step == 2 && !viewMap)
	{
		<div class="flex flex-col gap-y-2 border-2 border-black rounded p-2 justify-center items-center">
			<div class="w-full text-center border-b-2 border-black">
				<p class="text-lg font-medium text-black">Choose Date & Time</p>
			</div>
			<div class="flex flex-col gap-y-1 w-full">
				<p class="text-md text-black">Date:</p>
				<RadzenDatePicker @bind-Value=@day DateFormat="MM-dd-yyyy" class="w-full focus:outline-none" />
				<p class="text-md text-black">Time:</p>
				<RadzenDatePicker @bind-Value=@time ShowTime="true" TimeOnly="true" HourFormat="12" DateFormat="HH:mm"
				class="w-full focus:outline-none" />
			</div>
			<div class="flex flex-row justify-center items-center w-full gap-x-2">
				<button class="py-2 bg-red2 hover:bg-red text-cream text-md focus:outline-none rounded transition-all w-1/3"
				@onclick="cancel">Cancel</button>
				<button class="py-2 bg-green2 hover:bg-green text-cream text-md focus:outline-none rounded transition-all w-1/3"
				@onclick="toggleMap">View
					Map</button>
				<button class="py-2 bg-blue hover:bg-blue2 text-cream text-md focus:outline-none rounded transition-all w-1/3"
				@onclick="addToTrip">Save</button>
			</div>
		</div>
	}
	@if (viewMap)
	{
		<div class="flex flex-col gap-y-2 border-2 border-black rounded p-2 justify-center items-center">
			<img src="/images/toronto-city-map.jpeg" class="w-full h-full" />
			<button class="py-2 bg-red2 hover:bg-red text-cream text-md focus:outline-none rounded transition-all w-1/3"
			@onclick="toggleMap">Close Map</button>
		</div>
	}
</div>

@code {
	private DateTime day = DateTime.Today;
	private DateTime time = DateTime.Today;
	private int step = 0;
	private int trip = 0;

	private bool viewMap = false;
	void toggleMap()
	{
		viewMap = !viewMap;
	}
	void favorite() { }
	void addToTrip() { step += 1; }
	void cancel() { step = 0; }

	void setTrip(int id)
	{
		trip = id;
		step += 1;
	}

	void addTrip()
	{
		NavManager.NavigateTo("/starttrip");
	}
}